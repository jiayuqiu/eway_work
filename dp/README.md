# dp
cdp、ddp、qdp

## 20170606
1. 在压缩算法递归的过程中，会导致Python的计算效率变慢。
2. 快速D-P算法在用新方法的时候压缩效果不是很理想;用状态改变时效果比较理想，但是压缩用时也会上升。
3. 动态D-P算法与经典D-P算法，在分段之后压缩效果惊人相似

### 实验结果
用中国沿海船舶，201609的数据进行压缩，原始数据条数3193020条

#### QDP算法压缩结果（新方法）
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 131s | 0.697687% | 948041条
100m | 120s | 0.720964% | 636147条
150m | 111s | 0.742666% | 520644条
200m | 104s | 0.764446% | 461498条

#### QDP算法压缩结果（状态改变）
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 191s | 0.024339% | 988159条
100m | 183s | 0.121285% | 553694条
150m | 171s | 0.151437% | 535252条
200m | 164s | 0.183310% | 469505条

#### DDP算法压缩结果
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 176s | 0.21% | 629945条
100m | 162s | 0.27% | 490781条
150m | 155s | 0.34% | 419194条
200m | 147s | 0.38% | 375442条

#### DP算法压缩效果（没有进行分段）
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 500+s | 0.21% | 558251条
100m | 500+s | 0.29% | 417983条
150m | 500+s | 0.37% | 343443条
200m | 500+s | 0.42% | 298298条


## 20170607
对中国沿海数据进行压缩后发现有如下船舶压缩效果不佳<br>
            mmsi        dst1        dst2  deviation<br>
58   412362910.0  210.323913  243.828605  13.741083<br>
132  412570000.0  124.178112  155.413388  20.098189<br>
149  412703430.0  139.560100  160.980587  13.306255<br>
181  413003000.0  423.490696  520.142649  18.581817<br>
192  413130000.0  450.506916  551.375372  18.293972<br>
205  413203720.0  488.823633  592.023010  17.431650<br>
265  413326890.0  326.485798  394.581910  17.257789<br>
277  413352060.0   13.106531   18.877748  30.571529<br>
308  413364560.0  344.998126  414.441253  16.755843<br>
330  413376640.0  404.272239  468.992077  13.799772<br>
332  413376760.0  427.319321  528.843681  19.197423<br>
624  414027000.0  422.151861  514.087055  17.883196<br>
664  414110000.0  403.359106  481.549855  16.237311<br>
675  414126000.0  429.386030  521.671697  17.690373<br>
693  414154000.0   11.408810   13.266254  14.001266<br>

## 20170608
完成快速D-P算法，实验结果表明。效率与效果上都比动态D-P算法优秀

### 中国沿海 - 实验结果
原始轨迹条数：2949904条

#### QDP算法结果
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 101s | 0.0014% | 594996条
100m | 97s | 0.0015% | 501161条
150m | 94s | 0.0017% | 439192条
200m | 89s | 0.0019% | 401138条

#### DDP算法压缩结果
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 188s | 0.0014% | 550022条
100m | 170s | 0.0019% | 421713条
150m | 166s | 0.0023% | 357731条
200m | 157s | 0.0028% | 315856条

### 1000-4000TEU集装箱 - 实验结果
原始轨迹条数：7368816条

#### QDP算法结果
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 241s | 0.002922% | 1388603条
100m | 244s | 0.002957% | 1192426条
150m | 238s | 0.003001% | 1073915条
200m | 237s | 0.003053% | 992630条

#### DDP算法结果
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 452s | 0.0032% | 1360565条
100m | 438s | 0.0034% | 1065258条
150m | 417s | 0.0047% | 913673条
200m | 392s | 0.0049% | 815033条

### cape型船舶 - 实验结果
原始轨迹条数：3683957条

#### QDP算法结果
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 152s | 0.002154% | 713089条
100m | 147s | 0.002174% | 601555条
150m | 145s | 0.002200% | 536162条
200m | 139s | 0.002233% | 490126条

#### DDP算法结果
阈值 | 时间 | 误差 | 压缩后
---|---|---|---
50m | 277s | 0.002411% | 804257条
100m | 273s | 0.002521% | 608605条
150m | 263s | 0.002632% | 506074条
200m | 258s | 0.002735% | 438474条

#### 快速DP算法，spark运行
```bash
bin/spark-submit --master local[2] --executor-memory 2G --driver-memory 1G --conf spark.default.parallelism=12 --conf spark.shuffle.memoryFraction=0.3  /media/qiu/193D-D9CB/qiu/dp_main_spark.py 0.2 /home/qiu/Documents/201609_50w.tsv bm /home/qiu/Documents/tst_compress_bm
```

- 参数1：最大距离，输入单位：千米，默认为0.05千米;0.2
- 参数2：压缩前的AIS数据，文件路径;/home/qiu/Documents/201609_50w.tsv
- 参数3：数据来源，bm-博懋，cx-船讯网，thr-三阶段表格式;bm
- 参数4：压缩后的AIS数据，输出路径;/home/qiu/Documents/tst_compress_bm
